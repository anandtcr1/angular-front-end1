<div class="edit-profile-details w-100">
    <h4 class="mt-3">{{'editProfile' | lang}}</h4>
    <form [formGroup]="createUserForm" class="admin-form" (ngSubmit)="save()" #frm="ngForm">


        <div class="row mb-3">

            <div class="col-8">
                <div class="row mb-3">

                    <div class="col-6 ">
                        <section class="col-12 mt-3">
                            <div class="input-div">
                                <label>{{'firstName' | lang}}</label>
                                <input type="text" class="form-control" formControlName="firstName">
                                <app-form-error-handeling *ngIf="validation" [controlVal]="createUserForm.value.firstName"
                                    [formRef]="createUserForm" [controlName]="'firstName'"></app-form-error-handeling>
                            </div>
                        </section>
                    </div>
                    <div class="col-6">

                        <section class="col-12 mt-3">
                            <div class="input-div">
                                <label>{{'lastName' | lang}}</label>
                                <input type="text" class="form-control" formControlName="lastName">
                                <app-form-error-handeling *ngIf="validation" [controlVal]="createUserForm.value.lastName"
                                    [formRef]="createUserForm" [controlName]="'lastName'"></app-form-error-handeling>
                            </div>
                        </section>

                    </div>
                    <div class="col-6">
                        
                        <section class="col-12 mt-3">
                            <div class="input-div">
                                <label>{{'birthDate' | lang}}</label>
                                
                                
                                <div class="input-group">
                                    <input
                                      class="form-control"
                                      name="d2"
                                      ngbDatepicker
                                      [readOnly]="true"
                                      formControlName="birthDate"
                                      #d2="ngbDatepicker"
                                    />
                                    <button
                                      class="btn btn-outline-secondary calendar"
                                      (click)="d2.toggle()"
                                      type="button"
                                    >
                                    <fa-icon [icon]="['fas','calendar']"></fa-icon>
                                    </button>
                                  </div>
                                
                                <app-form-error-handeling *ngIf="validation" [controlVal]="createUserForm.value.birthDate"
                                    [formRef]="createUserForm" [controlName]="'birthDate'"></app-form-error-handeling>
                            </div>

                        </section>

                        
                        
                    </div>


                    <div class="col-6">
                        <section class="col-12 mt-3">
                            <div class="input-div">
                                <label>{{'email' | lang}}</label>
                                <input type="text" class="form-control" formControlName="email" [readOnly]="true">
                                <app-form-error-handeling [controlVal]="createUserForm.value.email"
                                    [formRef]="createUserForm" [controlName]="'email'"></app-form-error-handeling>
                            </div>
                        </section>
                    </div>

                    <div class="col-6">
                        <section class="col-12 mt-3">
                            <div class="input-div">
                                <label>{{'gender' | lang}}</label>
                                
                                <select class="form-control" formControlName="gender">
                                    <option *ngFor="let item of genderList" [value]="item.id" >{{item.text | lang}}</option>
                                </select>

                                <app-form-error-handeling *ngIf="validation" [controlVal]="createUserForm.value.gender"
                                    [formRef]="createUserForm" [controlName]="'gender'"></app-form-error-handeling>
                            </div>
                        </section>
                    </div>

                    <div class="col-6">
                        <section class="col-12 mt-3">
                            <div class="input-div">
                                <label>{{'mobileNumber' | lang}}</label>
                                <input type="text" placeholder="00-00000000" class="form-control" formControlName="mobileNumber" [readOnly]="true">
                                <app-form-error-handeling [controlVal]="createUserForm.value.mobileNumber"
                                    [formRef]="createUserForm" [controlName]="'mobileNumber'"></app-form-error-handeling>
                            </div>
                        </section>
                    </div>

                </div>
            </div>

            <div class="col-4">

                <div class="d-flex align-items-center justify-content-center">
                    <div class="personal-img-div">
                        <img [src]="imageSrc">
                    </div>
                </div>


                <div class="d-flex align-items-center justify-content-center">
                    <label for="imageUpload">{{'profilePicture' | lang}}</label>
                </div>

                <div class="d-flex align-items-center justify-content-center">
                    
                    <label class="fileContainer x-btn-mail-primary-outline w-25">
                        {{'fileUpload' | lang}}
                        <input type="file" (change)="showImage($event)"/>
                      </label>

                </div>

            </div>

        </div>

        <div class="row">

            <div class="col-4">
                <section class="col-12 mt-3">
                    

                    <div class="input-div">
                        <label>{{'city' | lang}}</label>
                        <select class="form-control" #city formControlName="city" (change)="getAreaList(city.value)">
                            <option *ngFor="let item of cityList" [value]="item.value" >{{ selectedLanguage == 'en' ? item.englishDisplay : item.arabicDisplay }}</option>
                        </select>

                        <app-form-error-handeling [controlVal]="createUserForm.value.city"
                            [formRef]="createUserForm" [controlName]="'city'"></app-form-error-handeling>
                    </div>

                </section>
            </div>

            <div class="col-4">
                <section class="col-12 mt-3">
                    <div class="input-div">
                        <label>{{'area' | lang}}</label>
                        
                        <select class="form-control" formControlName="area">
                            <option *ngFor="let item of areaList" [value]="item.value">{{item.englishDisplay | lang}}</option>
                        </select>

                        <app-form-error-handeling [controlVal]="createUserForm.value.area"
                            [formRef]="createUserForm" [controlName]="'area'"></app-form-error-handeling>
                    </div>
                </section>
            </div>

            <div class="col-4">
                <section class="col-12 mt-3">
                    <div class="input-div">
                        <label>{{'nationality' | lang}}</label>
                        <select class="form-control" formControlName="nationality">
                            <option *ngFor="let item of nationalityList" [value]="item.value" >{{ selectedLanguage == 'en' ? item.englishDisplay : item.arabicDisplay }}</option>
                        </select>

                        <app-form-error-handeling [controlVal]="createUserForm.value.nationality"
                            [formRef]="createUserForm" [controlName]="'nationality'"></app-form-error-handeling>
                    </div>
                </section>
            </div>


        </div>

        <div class="row">
            <div class="col-8">
                <section class="col-12 mt-3">
                    <div class="input-div">
                        <label>{{'address' | lang}}</label>
                        <input type="text" class="form-control" formControlName="address">
                        <app-form-error-handeling *ngIf="validation" [controlVal]="createUserForm.value.address"
                            [formRef]="createUserForm" [controlName]="'address'"></app-form-error-handeling>
                    </div>
                </section>
            </div>
            <div class="col-4">
                <section class="col-12 mt-3">
                    <div class="input-div">
                        <label>{{'alternateEmail' | lang}}</label>
                        <input type="text" class="form-control" formControlName="alternateEmail">
                        
                        <app-form-error-handeling [controlVal]="createUserForm.value.alternateEmail"
                                    [formRef]="createUserForm" [controlName]="'alternateEmail'"></app-form-error-handeling>
                    </div>
                </section>
            </div>
        </div>


        <div class="row">
            <div class="col-6">
                <section class="col-12 mt-3">
                      <div class="col-12 bg-gray right-side zone" appDrag (files)="filesDropped($event)" >
                        <div class="d-flex align-items-center justify-content-center flex-column drag-area">
                            <div id="dropZ">
                                <i ><fa-icon [icon]="['fas','cloud-upload']"></fa-icon></i>
                                <div>{{'dragAndDropFile' | lang}}</div>                    
                                <small>{{'fileRestriction' | lang}}</small>
                                <div class="selectFile">       
                                    <label for="file">{{'selectFile' | lang}}</label>
                                </div>
                                
                            </div>
                            <input #fileInput type="file" multiple="multiple"  accept="image/*,video/*" (change)="onFileInput(fileInput.files)"
                            style="display:none;" id="file"/>
                        </div>
                      </div>
                </section>
            </div>
            <div class="col-6">
                <section class="col-12 mt-3">
                    <table class="table">

                        <thead>
                            <tr>
                                <th></th>
                                <th>{{'fileName' | lang}}</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr *ngFor="let fl of fileList">
                                <td>
                                    <fa-icon [icon]="['fas','image']" *ngIf="fl.type=='image'"></fa-icon>
                                    <fa-icon [icon]="['fas','file-pdf']" *ngIf="fl.type=='pdf'"></fa-icon>
                                </td>
                                <td>
                                    {{fl.name}}
                                </td>
                                
                            </tr>
                        </tbody>

                    </table>

                </section>
            </div>
        </div>
          
        <div class="d-flex align-items-center justify-content-center mt-5 w-100">
            <button type="button" class="x-btn-mail-primary " (click)="backClicked()" >{{'cancel' | lang}}</button>
            <input [disabled]="submitted" type="submit" [value]="'save' | lang" class="x-btn-mail-primary bg-blue " >
        </div>
        
    </form>
</div>